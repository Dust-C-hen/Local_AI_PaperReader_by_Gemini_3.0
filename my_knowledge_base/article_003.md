# Network Utility Maximization under Maximum Delay Constraints and Throughput Requirements

## 论文概述
> 本文针对多跳网络中同时受限于最大延迟和吞吐量的网络效用最大化这一 NP 完全问题，提出了一种名为 PASS 的多项式时间近似算法，通过利用平均延迟与最大延迟的联系，在视频会议等场景中以可接受的延迟松弛换取了高达 100% 的效用提升 。

* **核心问题**: 
    1. 文章研究了在多跳网络中，针对多单播（multiple-unicast）流的网络效用最大化问题 。  
    2. 该问题要求在满足链路容量约束的同时，必须同时满足用户的最大端到端延迟约束（maximum end-to-end delay constraints）和吞吐量要求（throughput requirements）  
    3. 问题的难点在于最大延迟约束是非凸（non-convex）的，这使得问题极具挑战性 。
* **主要贡献**: 
    1. **理论证明**: 证明了该问题是 NP-完全（NP-complete）的。即使放宽最大延迟约束或吞吐量要求，构建满足所有约束的可行解或获得最优解依然是 NP-complete 的 。
    2. **算法设计**: 提出了一种多项式时间近似算法 PASS。该算法基于非凸的“最大延迟”与凸的“平均延迟”之间的新颖联系，通过求解平均延迟问题并迭代删除慢速路径上的流来获得解 。
    3. **性能验证**: 通过 Amazon EC2 数据中心的视频会议流量模拟，验证了 PASS 算法相比基准算法能获得高达 100% 的效用提升，且在满足吞吐量要求的同时，延迟违反程度在可接受范围内 。

## 符号说明
| 符号        | 含义                                              |
| :---------- | :------------------------------------------------ |
| $G(V,E)$    | 多跳网络模型，其中 $V$ 为节点集合，$E$ 为链路集合 |
| $c_e$       | 链路 $e$ 的恒定容量                               |
| $d_e$       | 数据通过链路 $e$ 的恒定延迟                       |
| $K$         | 网络中的用户（流）总数量                          |
| $s_i​,t_i$​ | 用户 $i$ 的源节点和目的节点                       |
| $f_i$       | 从源 $s_i$​ 到目的 $t_i$​ 的单播流                |
| $\mathcal M(f_i​)$   | 流 $f_i$​ 经历的最大端到端延迟                    |
| $\mathcal A(f_i​)$   | 流 $f_i$​ 经历的平均端到端延迟                    |
| $R_i$       | 用户 $i$ 的最小吞吐量要求                         |
| $D_i$       | 用户 $i$ 的最大延迟约束                           |
| $\mathcal U_i^t​(⋅)$ | 基于吞吐量的效用函数（凹函数，奖励高吞吐量）      |
| $\mathcal U_i^d​(⋅)$ | 基于最大延迟的效用函数（用于惩罚高延迟）          |
| $ϵ$         | PASS 算法中的迭代删除比例参数 ($ϵ∈(0,1)$)         |
| $P_i$       | 从 $s_i$​ 到 $t_i$​ 的所有路径集合                |
## 模型框架
### 目标函数: 
- 最大化网络总效用，可以是以下两种形式之一: 
  - 最大化基于吞吐量的总效用: $\sum_{i=1}^{K} \mathcal U_i^t(|f_i|)$ 。
  - 最大化基于最大延迟的总效用（即最小化延迟惩罚）: $\sum_{i=1}^{K} -\mathcal{U}_i^d(\mathcal{M}(f_i))$ 。

### 约束条件: 
- 吞吐量约束: 每个用户的流吞吐量必须大于等于预设值，即 $|f_i| \ge R_i$ 。
- 最大延迟约束: 每个用户的流所经历的最大延迟必须小于等于预设阈值，即 $\mathcal{M}(f_i) \le D_i$ 。
- 网络基础约束: 需满足流守恒（flow conservation）以及链路容量约束（流速率不超过 $c_e$） 。

### 求解策略(PASS算法)
- 松弛与转化: 将原问题中非凸的“最大延迟” $\mathcal{M}(f_i)$ 替换为凸的“平均延迟” $\mathcal{A}(f_i)$，求解这个凸优化问题得到初始流。
- 迭代优化: 对于每个流，找出其中最慢的路径，按比例 $\epsilon$ 删除该路径上的流量，直到满足特定条件。
- 近似结果: 最终得到的流 $\tilde{f}$ 是一个近似解，它可能以受控的比例违反原始约束，但能在多项式时间内完成计算。
![alt text](./figures/{C487F7F0-7D2F-4F48-8FC0-4CE097A8E36C}.png)

### 理论性能保证
作者证明了在特定条件下（效用函数满足凹/凸性和非递减/非负性），使用任意 $\epsilon \in (0,1)$ 运行 PASS 算法的性能边界 : 
- 计算效率: 算法保证在多项式时间内返回解。
- 约束松弛边界: 返回的解 $\tilde{f}$ 满足以下松弛后的约束: 
  - 吞吐量: $|\overline{f_{i}}|\ge(1-\epsilon)\cdot R_{i}$
  - 最大延迟: $\mathcal{M}(\overline{f}_{i})\le D_{i}/\epsilon$
- 效用近似比: 
  - 如果是最大化吞吐量效用，获得的效用至少是最优解的 $(1-\epsilon)$ 倍。
  - 如果是最大化最大延迟效用（即最小化延迟惩罚），其惩罚值不超过最优解的 $1/\epsilon$ 倍。

## 结论

1. **理论复杂性**: 在最大延迟约束和吞吐量要求下进行网络效用最大化是一个 NP-完全问题(NP-complete)，直接求解最优解在计算上不可行 。

2. **算法有效性**: 提出的 PASS 算法及其变体（PASS-T, PASS-M）能够在多项式时间内提供具有常数或问题相关近似比的解 。
   - 标准 PASS 算法可能会同时违反最大延迟和吞吐量约束
   - PASS-T: 保证满足吞吐量要求，但可能违反最大延迟约束。
   - PASS-M: 保证满足最大延迟约束，但可能违反吞吐量要求。
   
3. **实际应用价值**: 在视频会议流量模拟中，PASS 算法虽然在最大延迟约束上有所放松（例如从 150ms 放宽到约 300ms，仍在 400ms 的可接受范围内），但能够满足吞吐量要求，并比其他基准算法显著提升了网络效用（高达 100%） 。